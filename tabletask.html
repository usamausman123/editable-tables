<html>
<head>
    <title> Question 5</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        function add() 
        {
            /*var x1=document.getElementById("name").value;
            var x2=document.getElementById("desc").value;
            var x3=document.getElementById("price").value;*/
            //var row1 = "<tr><td>" + " " + "</td><td>" + " " + "</td><td>" + " " + "</td><tr>" ;
            
            
            /*var row1 = document.createElement("tr");
            var col1 = document.createElement("td");
            var col2 = document.createElement("td");
            var col3 = document.createElement("td");
            var col4 = document.createElement("td");
            col4.innerHTML=" Delete Row";
            row1.appendChild(col1);
            row1.appendChild(col2);
            row1.appendChild(col3);
            row1.appendChild(col4);
            document.getElementById("b").appendChild(row1);*/
            //var table=document.getElementById("b"),rIndex;
            var x1 = document.getElementById("name").value;
            var x2 = document.getElementById("quantity").value;
            var x3 = document.getElementById("price").value;
            if(x1== "" || x2=="" || x3=="")
            {
                    swal("DEAD","Please fill the fields!","warning");
            }
            
            else{
                
            var table=document.getElementById("b");
            var newRow = table.insertRow(table.rows.length);
            var cel1 = newRow.insertCell(0);
            var cel2 = newRow.insertCell(1);
            var cel3 = newRow.insertCell(2);
            var cel4 = newRow.insertCell(3);
            var cel5 = newRow.insertCell(4);
            cel2.setAttribute("contenteditable","true");
            cel3.setAttribute("contenteditable","true");
            
            var del=document.createElement("button");
            var y=document.createTextNode("Delete");
            del.appendChild(y);
            del.setAttribute("class","btn btn-danger");
            del.setAttribute("style","border-radius:20px; background-color:black;");
            del.setAttribute('onclick',"fun(this)");
            cel5.appendChild(del);
            
            var upd=document.createElement("button");
            var y2=document.createTextNode("Update");
            upd.appendChild(y2);
            upd.setAttribute("class","btn btn-primary");
            upd.setAttribute("style","border-radius:20px; background-color:red;");
            upd.setAttribute('onclick',"fun2()");
            cel5.appendChild(upd);
            
            var rIndex = table.rows.length;
            table.rows[rIndex-1].cells[0].innerHTML = document.getElementById("name").value;
            table.rows[rIndex-1].cells[1].innerHTML = document.getElementById("quantity").value;
            table.rows[rIndex-1].cells[2].innerHTML = document.getElementById("price").value;
            table.rows[rIndex-1].cells[3].innerHTML = parseFloat(table.rows[rIndex-1].cells[1].innerHTML) * parseFloat(table.rows[rIndex-1].cells[2].innerHTML)
            
            var tab=document.getElementById("b");
            var subtotal=0.0;
            var tax=0.0;
            var total=0.0;
            for(var i = 1; i < tab.rows.length; i++)
            {
                subtotal  = subtotal + parseFloat(tab.rows[i].cells[3].innerHTML);
                tax= subtotal*0.1;
                total=tax+subtotal;
                document.getElementById("t1").value= subtotal;
                document.getElementById("t2").value= tax;
                document.getElementById("t3").value= total;
                
            }
            document.getElementById("name").value="";
            document.getElementById("quantity").value="";
            document.getElementById("price").value="";
            
        }
        }
        function fun(button)
        {
            var row = button.parentNode.parentNode;
            var name = row.getElementsByTagName("TD")[0].innerHTML;
            if (confirm("Do you want to delete: " + name)) {
 
                //Get the reference of the Table.
                var table = document.getElementById("b");
 
                //Delete the Table row using it's Index.
                table.deleteRow(row.rowIndex);
            }   
            var tab=document.getElementById("b");
            var subtotal=0.0;
            var tax=0.0;
            var total=0.0;
            
            if(tab.rows.length==1)
               {
                    subtotal=0.0;
                    tax=0.0;
                    total=0.0;
                    document.getElementById("t1").value= subtotal;
                document.getElementById("t2").value= tax;
                document.getElementById("t3").value= total;
               }
            else{
            for(var i =1 ; i < tab.rows.length; i++)
            {
                subtotal  = subtotal + parseFloat(tab.rows[i].cells[3].innerHTML);
                tax= subtotal*0.1;
                total=tax+subtotal;
                document.getElementById("t1").value= subtotal;
                document.getElementById("t2").value= tax;
                document.getElementById("t3").value= total;
                
            }
            }
        }
               
        function fun2()
        {
               
            var tab=document.getElementById("b");
            var subtotal=0.0;
            var tax=0.0;
            var total=0.0;
            for(var i =1 ; i < tab.rows.length; i++)
            {
                
                tab.rows[i].cells[3].innerHTML = parseFloat(tab.rows[i].cells[1].innerHTML) * parseFloat(tab.rows[i].cells[2].innerHTML)
                subtotal  = subtotal + parseFloat(tab.rows[i].cells[3].innerHTML);
                tax= subtotal*0.1;
                total=tax+subtotal;
                document.getElementById("t1").value= subtotal;
                document.getElementById("t2").value= tax;
                document.getElementById("t3").value= total;
                
            }
        }
    </script>    
</head>
<body>
    <div class="container">
        
    <form class="form-inline" action="#">
        <br><div style="background-color:black; color:#53c68c; height : 80px; padding: 10px;">
        <center><i><b><p style="font-size: 40px;  font-family: Times New Roman, Times, serif;" onmouseover="this.style.color='red'" onmouseout="this.style.color='#53c68c'">Invoice Bill System</p></b></i></center>
        </div><br/><br>
        <div class="form-group">
            <label for="email">Name:</label>
            <input type="text" class="form-control" id="name" placeholder="Name Here">
        </div>
        <div class="form-group">
            <label for="pwd">Quantity:</label>
            <input type="number" class="form-control" id="quantity" placeholder="Quantity Here">
        </div>
        <div class="form-group">
            <label for="pwd">Unit Price:</label>
            <input type="number" class="form-control" id="price" placeholder="Price Here">
        </div>
        <button type="submit" class="btn btn-info" onclick="add()" style="background-color: black; color: #53c68c;">Add Row</button>
    </form>
        
    <br><br>
    <table class="table table-striped table-bordered" id="b" cellspacing="10px">
            <tr>
                <th>Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
                <th>Delete</th>
            </tr>
    </table><br/>
        <table class="table table-striped table-bordered" id="b" cellspacing="10px" style="float:right; width:50%;">
            <tr class="success">
                <th>Sub Total</th>
                <td><input type="text" class="form-control" id="t1" style="background-color:darkgrey; color:cornsilk;"></td>
            </tr>
            <tr class="danger">
                <th>Tax</th>
                <td><input type="text" class="form-control" id="t2" style="background-color: darkgrey; color:cornsilk;"></td>
            </tr>
            <tr class="info">
                <th>Total</th>
                <td><input type="text" class="form-control" id="t3" style="background-color: darkgrey; color:cornsilk;"></td>
            </tr>
    </table>
    </div>
</body>
</html>